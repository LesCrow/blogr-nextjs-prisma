(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(4186)}])},7770:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var s=a(5893),n=a(7837),i=a(5675),c=a.n(i);a(7294);var r=a(6353),l=a(7180);function o(e){let{movie:t}=e,{data:a,isLoading:i,error:o}=(0,n.a)(["myMovie"],()=>l.d.getOne(t.id));return i?(0,s.jsx)("div",{children:"Loading..."}):(console.log(t.id),(0,s.jsxs)("div",{className:"w-full mb-10 border border-[#1A1A1A]",children:[(0,s.jsx)(c(),{src:(0,r.c1)(t.poster_path),width:150,height:300,alt:t.title}),(0,s.jsxs)("div",{className:"mt-2 pb-4 w-fit space-y-2",children:[(0,s.jsxs)("div",{className:"flex pl-2",children:[(0,s.jsx)(c(),{src:"/pictos/star.png",width:20,height:20,alt:"star"}),(0,s.jsx)("p",{className:"ml-2",children:t.vote_average})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"w-[150px] truncate px-2",children:t.title}),(0,s.jsx)("p",{className:"text-xs px-2 ",children:(0,r.Dm)(t.release_date)})]})]})]}))}},4186:function(e,t,a){"use strict";a.r(t);var s=a(5893),n=a(5176),i=a.n(n),c=a(7294),r=a(3299),l=a(1664),o=a.n(l),d=a(7536),u=a(7837),p=a(5121),m=a(5675),f=a.n(m),x=a(7770);let h=e=>{let{data:t,status:a}=(0,r.useSession)(),{register:n,handleSubmit:l}=(0,d.cI)(),[m,h]=(0,c.useState)(""),{data:g,error:v,isLoading:w}=(0,u.a)(["moviesTopRated"],()=>p.C6.getAll()),{data:j,error:_,isLoading:b}=(0,u.a)(["movies"],()=>p.Fo.getAll(m));if(b||w)return(0,s.jsx)("div",{children:"Loading...."});let y=e=>{h(e.query)};return(0,s.jsxs)("main",{className:"w-[90%] mx-auto ".concat(i().className),children:[(0,s.jsx)(f(),{src:"/pictos/logo.png",width:400,height:100,alt:"MOOOVIES",className:"mx-auto "}),(0,s.jsxs)("form",{className:"flex flex-col space-y-4",onSubmit:l(y),children:[(0,s.jsx)("input",{className:"rounded-full h-8 px-4 text-center text-black border border-black",placeholder:"Recherchez...",...n("query")}),(0,s.jsx)("button",{className:"bg-[#292E35] text-secondary rounded-full w-fit px-6 py-1 mx-auto",type:"submit",children:"Search"})]}),""===m?(0,s.jsxs)("div",{className:"mt-10",children:[(0,s.jsx)("h1",{className:"w-fit mb-6 mx-auto text-2xl text-primary",children:"Les mieux not\xe9s"}),(0,s.jsx)("div",{className:"flex flex-wrap justify-between w-full",children:g.results.map(e=>(0,s.jsx)(o(),{href:"p/".concat(e.id),children:(0,s.jsx)(x.Z,{movie:e},e.id)},e.id))})]}):(0,s.jsx)("div",{className:"mt-10",children:(0,s.jsx)("div",{className:"flex flex-wrap justify-between w-full",children:j.results.map(e=>(0,s.jsx)(o(),{href:"p/".concat(e.id),children:(0,s.jsx)(x.Z,{movie:e},e.id)},e.id))})})]})};t.default=h},6353:function(e,t,a){"use strict";a.d(t,{Dm:function(){return s},aA:function(){return n},c1:function(){return i}});let s=e=>new Date(e).getFullYear(),n=e=>"".concat(Math.floor(e/60),"h ").concat(e%60,"min"),i=e=>null!==e?"https://image.tmdb.org/t/p/w500".concat(e):"/pictos/no-image.jpg"},7180:function(e,t,a){"use strict";a.d(t,{d:function(){return i},b:function(){return c}});var s=a(8433),n=(()=>{let e=s.Z.create({baseURL:"http://localhost:3000/api/"});return e})();let i={getOne:async e=>await (await n.get("/movies?api_id=".concat(e))).data},c={getAll:async()=>(await n.get("movies")).data,post:async(e,t,a)=>await n.post("movies",{api_id:e,alreadySeen:t,favourite:a}),update:async(e,t,a)=>await n.put("movies/".concat(e),{alreadySeen:a,favourite:t})}},5121:function(e,t,a){"use strict";a.d(t,{sO:function(){return r},Fo:function(){return c},C6:function(){return l}});var s=a(8433),n=a(3454),i=(()=>{let e={baseURL:n.env.API_URL||"https://api.themoviedb.org/3/"},t=s.Z.create(e);return t})();let c={getAll:async e=>(await i.get("/search/movie?api_key=".concat("dd1eb8ca85399a76f2c590a30e7e2364","&query=").concat(e))).data},r={getOne:async e=>(await i.get("/movie/".concat(e,"?api_key=").concat("dd1eb8ca85399a76f2c590a30e7e2364","&append_to_response=credits&language=fr-FR"))).data},l={getAll:async()=>(await i.get("/movie/top_rated?api_key=".concat("dd1eb8ca85399a76f2c590a30e7e2364","&language=fr-FR&page=1&append_to_response=credits"))).data}}},function(e){e.O(0,[478,763,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);