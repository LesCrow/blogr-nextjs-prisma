(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{1474:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mylist",function(){return a(6902)}])},7770:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(5893),i=a(7837),c=a(5675),r=a.n(c);a(7294);var n=a(6353),o=a(7180);function l(e){let{movie:t}=e,{data:a,isLoading:c,error:l}=(0,i.a)(["myMovie"],()=>o.d.getOne(t.id));return c?(0,s.jsx)("div",{children:"Loading..."}):(console.log(t.id),(0,s.jsxs)("div",{className:"w-full mb-10 border border-[#1A1A1A]",children:[(0,s.jsx)(r(),{src:(0,n.c1)(t.poster_path),width:150,height:300,alt:t.title}),(0,s.jsxs)("div",{className:"mt-2 pb-4 w-fit space-y-2",children:[(0,s.jsxs)("div",{className:"flex pl-2",children:[(0,s.jsx)(r(),{src:"/pictos/star.png",width:20,height:20,alt:"star"}),(0,s.jsx)("p",{className:"ml-2",children:t.vote_average})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"w-[150px] truncate px-2",children:t.title}),(0,s.jsx)("p",{className:"text-xs px-2 ",children:(0,n.Dm)(t.release_date)})]})]})]}))}},6902:function(e,t,a){"use strict";a.r(t);var s=a(5893),i=a(7837),c=a(8433),r=a(1664),n=a.n(r),o=a(7294),l=a(7770),d=a(7180);let u=e=>{let{data:t,error:a,isLoading:r}=(0,i.a)(["myMovies"],async()=>d.b.getAll()),u=[],p=[],m=[],[h,f]=(0,o.useState)(!1),[x,v]=(0,o.useState)(!1),[w,g]=(0,o.useState)(!0),[_,j]=(0,o.useState)([]),[y,b]=(0,o.useState)([]),[N,E]=(0,o.useState)([]),[S,k]=(0,o.useState)([]),A=async e=>{let t=e.map(e=>c.Z.get("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("dd1eb8ca85399a76f2c590a30e7e2364","&append_to_response=credits")));try{let e=await Promise.all(t),a=e.map(e=>e.data);j(a)}catch(e){throw console.error(e),Error("Failed to fetch movies")}};(0,o.useEffect)(()=>{A(u)},[]);let Z=async e=>{let t=e.map(e=>c.Z.get("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("dd1eb8ca85399a76f2c590a30e7e2364","&append_to_response=credits")));try{let e=await Promise.all(t),a=e.map(e=>e.data);b(a)}catch(e){throw console.error(e),Error("Failed to fetch movies")}};(0,o.useEffect)(()=>{Z(p)},[]);let L=async e=>{let t=e.map(e=>c.Z.get("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("dd1eb8ca85399a76f2c590a30e7e2364","&append_to_response=credits")));try{let e=await Promise.all(t),a=e.map(e=>e.data);E(a)}catch(e){throw console.error(e),Error("Failed to fetch movies")}};(0,o.useEffect)(()=>{L(m)},[]);let C=()=>{g(!w)},F=()=>{v(!x),w&&g(!1),h&&f(!1)},P=()=>{f(!h),w&&g(!1),x&&v(!1)};return r?(0,s.jsx)("div",{children:"Loading..."}):(console.log(w),t.map(e=>u.push(e.api_id)),t.filter(e=>e.alreadySeen?p.push(e.api_id):m.push(e.api_id)),(0,s.jsxs)("div",{className:"mt-10 w-[90%] mx-auto",children:[(0,s.jsx)("button",{className:"w-full mb-6 mx-auto text-2xl text-primary",onClick:C,children:"MA LISTE"}),(0,s.jsxs)("div",{className:"flex justify-around",children:[(0,s.jsx)("button",{className:w||h?"text-white":"text-gray",onClick:P,children:"A voir"}),(0,s.jsx)("button",{className:w||x?"text-white":"text-gray",onClick:F,children:"D\xe9j\xe0 vu"})]}),(0,s.jsx)("button",{className:"mx-auto w-full",children:"Favoris"}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-between w-full mt-8",children:[w&&_.map(e=>(0,s.jsx)(n(),{href:"p/".concat(e.id),children:(0,s.jsx)(l.Z,{movie:e})},e.id)),x&&y.map(e=>(0,s.jsx)(n(),{href:"p/".concat(e.id),children:(0,s.jsx)(l.Z,{movie:e})},e.id)),h&&N.map(e=>(0,s.jsx)(n(),{href:"p/".concat(e.id),children:(0,s.jsx)(l.Z,{movie:e})},e.id))]})]}))};t.default=u},6353:function(e,t,a){"use strict";a.d(t,{Dm:function(){return s},aA:function(){return i},c1:function(){return c}});let s=e=>new Date(e).getFullYear(),i=e=>"".concat(Math.floor(e/60),"h ").concat(e%60,"min"),c=e=>null!==e?"https://image.tmdb.org/t/p/w500".concat(e):"/pictos/no-image.jpg"},7180:function(e,t,a){"use strict";a.d(t,{d:function(){return c},b:function(){return r}});var s=a(8433),i=(()=>{let e=s.Z.create({baseURL:"http://localhost:3000/api/"});return e})();let c={getOne:async e=>await (await i.get("/movies?api_id=".concat(e))).data},r={getAll:async()=>(await i.get("movies")).data,post:async(e,t,a)=>await i.post("movies",{api_id:e,alreadySeen:t,favourite:a}),update:async(e,t,a)=>await i.put("movies/".concat(e),{alreadySeen:a,favourite:t})}}},function(e){e.O(0,[478,774,888,179],function(){return e(e.s=1474)}),_N_E=e.O()}]);